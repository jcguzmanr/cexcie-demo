generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider     = "postgresql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model campus {
  id     String @id
  nombre String
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model campus_meta {
  id        String  @id
  imagen    String?
  direccion String?
  ciudad    String?
  map_url   String?
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model carrera {
  id                 String  @id
  nombre             String
  facultad_id        String
  duracion           String?
  malla_resumen_json Json?
  grado              String?
  titulo             String?
  imagen             String?

  @@unique([facultad_id, nombre], map: "uq_carrera_facultad_nombre")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model carrera_campus {
  carrera_id String
  campus_id  String

  @@id([carrera_id, campus_id])
  @@index([campus_id, carrera_id], map: "ix_carrera_campus_by_campus")
}

model carrera_detalle {
  carrera_id  String   @id
  secciones   Json     @default("{}")
  actualizado DateTime @default(now()) @db.Timestamptz(6)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model carrera_modalidad {
  carrera_id   String
  modalidad_id String

  @@id([carrera_id, modalidad_id])
  @@index([modalidad_id, carrera_id], map: "ix_carrera_modalidad_by_modalidad")
}

model didactics {
  id          String   @id
  payload     Json
  actualizado DateTime @default(now()) @db.Timestamptz(6)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model facultad {
  id     String @id
  nombre String @unique
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model modalidad {
  id String @id
}

model modalidad_comparison {
  career_id   String   @id
  payload     Json
  actualizado DateTime @default(now()) @db.Timestamptz(6)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model moneda {
  codigo  String  @id
  simbolo String?
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model oferta {
  carrera_id   String
  campus_id    String
  modalidad_id String
  estado       String @default("activa")
  extras       Json?

  @@id([carrera_id, campus_id, modalidad_id])
  @@index([campus_id, modalidad_id, carrera_id], map: "ix_oferta_campus_modalidad_carrera")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model periodo {
  id     String    @id
  anio   Int
  ciclo  Int
  inicio DateTime? @db.Date
  fin    DateTime? @db.Date
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model precio {
  carrera_id    String
  campus_id     String
  modalidad_id  String
  periodo_id    String
  item          String
  monto         Decimal   @db.Decimal(12, 2)
  moneda_codigo String
  vigente_desde DateTime? @db.Date
  vigente_hasta DateTime? @db.Date

  @@id([carrera_id, campus_id, modalidad_id, periodo_id, item])
  @@index([campus_id, modalidad_id, periodo_id], map: "ix_precio_campus_modalidad_periodo")
  @@index([carrera_id, periodo_id], map: "ix_precio_carrera_periodo")
  @@index([carrera_id, periodo_id, vigente_desde, vigente_hasta], map: "ix_precio_vigencia_rng")
}
